<div class="surveys-list">
    <table class="table" *ngIf="selectedSurvey === null">
        <thead>
        <tr>
            <th *ngFor="let column of columns" scope="col">{{column}}</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let survey of surveys; let i=index" (click)="selectSurvey(i)">
            <td scope="row">{{survey.asset?.assetAddress.resolvedAddress}}</td>
            <td scope="row">{{survey.inspector?.name}}</td>
            <td scope="row">{{survey.asset?.assetAddress.subLocality}}</td>
            <td scope="row">{{survey.leak}}</td>
            <td scope="row">{{survey.dateOfSurvey}}</td>
            <td scope="row">{{survey.startTime | date:'mediumTime'}}</td>
            <td scope="row">{{survey.endTime | date:'mediumTime'}}</td>
            <td scope="row">{{survey.distanceTravelled}}</td>
        </tr>
        </tbody>
    </table>


    <div class="survey-detail container-fluid" *ngIf="selectedSurvey !== null">

        <div class="row">
            <agm-map  style="height: 300px; width: 100%"
                      [latitude]="selectedSurvey.geoData.features[0].geometry.coordinates[0][1]"
                      [longitude]="selectedSurvey.geoData.features[0].geometry.coordinates[0][0]"
                      [zoom]="15">
                <agm-polyline strokeColor="blue" >
                    <agm-polyline-point *ngFor="let coords of selectedSurvey.geoData.features[0].geometry.coordinates"
                                        [latitude]="coords[1]" [longitude]="coords[0]"></agm-polyline-point>
                </agm-polyline>
            </agm-map>
        </div>

        <div class="row">
            <div class="col-12">
                <h4>{{selectedSurvey.resolvedAddress}}</h4>
                <h5>{{selectedSurvey.dateOfSurvey | date:'MMM dd, yyyy'}} By {{selectedSurvey.inspector.name}}</h5>
            </div>
        </div>

        <div class="row">
            <div class="col-6">
                <span class="pull-left">Asset ID</span>
                <span class="pull-right">{{selectedSurvey.asset.assetId}}</span>
            </div>
            <div class="col-6">
                <span class="pull-left">Start Time</span>
                <span class="pull-right">{{selectedSurvey.startTime | date:'mediumTime'}}</span>
            </div>
        </div>

        <div class="row">
            <div class="col-6">
                <span class="pull-left">Material Type</span>
                <span class="pull-right">{{selectedSurvey.asset.materialType}}</span>
            </div>
            <div class="col-6">
                <span class="pull-left">End Time</span>
                <span class="pull-right">{{selectedSurvey.endTime | date:'mediumTime'}}</span>
            </div>
        </div>


        <div class="row">
            <div class="col-6">
                <span class="pull-left">Installation Date</span>
                <span class="pull-right">{{selectedSurvey.asset.installationDate}}</span>
            </div>
            <div class="col-6">
                <span class="pull-left">Distance Travelled</span>
                <span class="pull-right">{{selectedSurvey.distanceTravelled}}</span>
            </div>
        </div>

    </div>

</div>